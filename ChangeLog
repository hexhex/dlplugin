2006-05-29  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/DLRewriter.cpp: Adapt to new OWLParser interface.
	* src/RacerInterface.cpp: Likewise.
	* src/RacerQuery.cpp: Likewise.
	* testsuite/TestOWLParser.cpp: Likewise.
	* testsuite/TestOWLParser.h: Likewise.

	* include/OWLParser.h: Add exception support.
	Decouple interface from Query and Answer.
	* src/OWLParser.cpp: Likewise.

2006-05-24  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/RacerExtAtom.cpp: Use RacerInterface::startRacer() instead
	of RacerRuner::run().
	Use RacerInterface::PropertyMap.
	* include/RacerExtAtom.h: Likewise.

	* src/TCPStream.cpp: Use std::clog for logging sent/received
	messages.
	* src/RacerRunner.cpp: Likewise.

	* src/RacerDirector.cpp (RacerDebugCachingDirector): Use std::cerr
	instead of std::cout.

	* README: Document ACE + autoconf scheme.
	Add some installation hints for boost.

	* configure.ac: Bail out if ACE is not found.
	Use ACE.pc and fall back to ACE.m4 if we couldn't find it.

	* m4/ace.m4: Add HAVE_ACE variable.
	Use ACE_CFLAGS instead of ACE_CPPFLAGS.

	* testsuite/TestRacerInterface.cpp: Call
	RacerInterface::setOptions.

	* include/RacerInterface.h (RacerInterface::startRacer): Run Racer
	and setup stream.
	Add PropertyMap.

	* src/RacerInterface.cpp (RacerInterface::setOptions): Setup
	std::clog for LogBuf logging.
	(RacerInterface::startRacer): Run Racer and setup stream.
	
	* src/Makefile.am (libdlvhexracer_la_SOURCES): Add LogBuf.cpp.
	* include/Makefile.am (noinst_HEADERS): Add LogBuf.h.

	* include/LogBuf.h: New file.
	* src/LogBuf.cpp: Likewise.

2006-05-17  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* testsuite/TestRacerParse.cpp: Use file:// instead of file:.

	* src/RacerAnswerScanner.lpp: Resemble the URI ABNF given in
	RFC3986.

	* src/RacerAnswerParser.ypp: Accommodate grammar to use the new
	URI token instead of the weak grammar for parsing an URI.

2006-05-15  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/RacerInterface.cpp (RacerInterface::setOptions): Setup
	property map for the atoms.
	
	* src/RacerExtAtom.cpp (RacerCachingAtom::getCachedDirectors):
	Consult property map whether user wants verbose output.

	* include/RacerExtAtom.h: Add a reference to a property map.

	* include/RacerInterface.h: Add a property map.

2006-05-12  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/DLRewriter.cpp (DLRewriter::rewrite): Register auxiliary names.

	* src/TCPStream.cpp (TCPStreamBuf::sync, TCPStreamBuf::open): Add
	"Couldn't open connection" and "Couldn't send" exceptions.

	* src/RacerRunner.cpp (RacerRunnerAdaptee::run): Add "Command not
	found" exception.

2006-05-06  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/TCPStream.cpp (TCPIOStream::TCPIOStream): Turn on exception
	handling.
	(TCPStreamBuf::underflow): Throw std::ios_base::failure when peer
	prematurely closes the connection.

	* src/RacerAnswerDriver.cpp (RacerAnswerDriver::parse)
	(RacerIgnoreAnswer::parse): Catch std::ios_base::failure.

2006-05-05  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/RacerQuery.cpp (Query::createPremise): Add preliminary
	workaround for Racer bug.

	* include/RacerDirector.tcc
	(RacerDirector<Builder,Parser>::query): Don't parse an answer if
	Builder didn't build.

	* include/RacerBuilder.h (RacerBuilder::buildCommand): Use bool
	return value to indicate if we actually sent a command.
	* src/RacerBuilder.cpp (RacerStateBuilder::buildCommand): Return
	false if state command would be empty.

	* src/TCPStream.cpp (TCPStreamBuf::open): Don't use
	ACE_Countdown_Time.

2006-05-04  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/DLRewriter.cpp: Use input/output streams of PluginRewriter.
	* include/DLRewriter.h: Likewise.
	
2006-05-02  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/DLRewriter.cpp (DLRewriter::rewrite): Don't rewrite if uri
	is empty.

	* examples/wires.owl: New file.

	* examples/wires.hex: New file.

	* src/RacerRunner.cpp (RacerRunnerAdaptee::run): Create pipe to
	Racer and parse stdout,stderr for error messages.

	* include/TCPStream.h (TCPIOStream): Use std::iostream::rdfbuf() for our streambuf.
	* src/TCPStream.cpp (TCPIOStream): Likewise.

	* include/RacerInterface.h (RacerInterface::setOptions): Use std::vector argv.
	* src/RacerInterface.cpp (RacerInterface::setOptions): Likewise.

2006-04-29  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/DLRewriter.cpp: Improve documentation.

	* src/RacerInterface.cpp (RacerInterface::createRewriter): Enable
	rewriter.
	(RacerInterface::setOptions): Fix --ontology parsing.

2006-04-28  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/dl-rewriter: Remove.
	* src/Makefile.am: Remove dl-rewriter.

	* examples/tweety_bird.owl: Use default namespace
	http://www.kr.tuwien.ac.at/staff/roman/tweety_bird#.

	* examples/dl-shop.dlp: New file.

	* testsuite/TestDLRewriter.cpp (TestDLRewriter::runDLNoRewrite):
	DLRewriter must not rewrite HEX programs.
	(TestDLRewriter::runDLRewrite): Add dl-shop.dlp testcase.
	* testsuite/TestDLRewriter.h: Likewise.

	* src/DLRewriter.cpp (DLRewriter::rewriteConcept): Strip whitespaces.
	(DLRewriter::filterInput): DL rewriting should work now.
	* include/DLRewriter.h: Likewise.

2006-04-27  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/RacerInterface.cpp (RacerInterface::createRewriter): Disable
	DLRewriter.

	* src/DLRewriter.cpp: Remove regexp code, let's do it ourselves.
	* include/DLRewriter.h: Likewise.

	* examples/Makefile.am: Add tweety_bird.owl, tweety_bird.dlp.

	* testsuite/Makefile.am: Add TestDLRewriter.cpp, TestDLRewriter.h.

	* examples/tweety_bird.dlp: New file.
	* examples/tweety_bird.owl: Likewise.
	* testsuite/TestDLRewriter.cpp: Likewise.
	* testsuite/TestDLRewriter.h: Likewise.

2006-04-26  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>
	
	* src/DLRewriter.cpp: New file.
	Some updates, currently non-working.
	* include/DLRewriter.h: Likewise.

	* src/RacerRunner.cpp (RacerRunner::isRunning)
	(RacerRunner::setPort, RacerRunner::getPort): New methods.
	(RacerRunner::run): Don't check for running Racer processes.
	(RacerRunner::run): Try to start Racer with a new port number.
	* include/RacerRunner.h: Likewise.

	* include/TCPStream.h (TCPIOStream::setConnection): New method.
	* src/TCPStream.cpp: Likewise.

	* src/RacerInterface.cpp (RacerInterface::getStream): New method.
	* include/RacerInterface.h: Likewise.

	* src/RacerExtAtom.cpp: Add kb-ontologies command.
	(RacerExtAtom::retrieve): Reset stream after starting Racer.
	* include/RacerBuilder.h: Likewise.
	Fix documentation.

2006-04-25  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* include/Makefile.am (noinst_HEADERS): Add DLRewriter.h.

	* src/Makefile.am (bin_SCRIPTS): Add dl-rewriter.
	Add DLRewriter.cpp.

	* src/OWLParser.cpp (OWLParser::parseNames): Parse concept and
	role names.
	* include/OWLParser.h: Likewise.

	* src/RacerInterface.cpp: Add DLRewriter.
	* include/RacerInterface.h: Likewise.

	* src/dl-rewriter: New file.

2006-04-24  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* include/Makefile.am (noinst_HEADERS): Add RacerQueryExpr.h and
	RacerQueryExpr.tcc.

2006-04-21  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* src/RacerInterface.cpp (RacerInterface::~RacerInterface): Don't
	delete cache entries, they are managed shared_ptr's now.
	(RacerInterface::setOptions): New method.
	* include/RacerInterface.h: Likewise.

2006-04-19  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* include/RacerQuery.h (QueryCtx): Add a Ctor for PluginAtom::Query.
	* src/RacerQuery.cpp: Likewise.

	* include/RacerExtAtom.h (RacerExtAtom::setupQuery): Remove.
	* src/RacerExtAtom.cpp: Likewise.

	* src/RacerQuery.cpp (Query::createHead): Simplify code.

	* src/RacerBuilder.cpp: Use the interpreters of RacerQueryExpr to
	build the commands.

	* include/RacerBuilder.h (RacerBuilder::createName): Remove.

	* include/RacerQueryExpr.tcc: New file.

	* include/RacerNRQL.h: Move operator<< to RacerQueryExpr.tcc.
	* src/RacerNRQL.cpp: Likewise.

	* src/RacerQueryExpr.cpp (ABoxInvertedRole): New class.
	* include/RacerQueryExpr.h: Likewise.

2006-04-18  Thomas Krennwallner  <tkren@kr.tuwien.ac.at>

	* include/RacerQueryExpr.h (~QueryExpr): Add virtual dtor.

	* m4/boost.m4: OLD_CXX_FLAGS != OLD_CXXFLAGS.

	* include/RacerNRQL.h: Publish operator<< for std::vector of
	boost::shared_ptr's.

	* src/RacerQueryExpr.cpp: Move code of RacerQueryExpr.h here.
	* include/RacerQueryExpr.h: Likewise.

	* src/Makefile.am (libdlvhexracer_la_SOURCES): Add RacerQueryExpr.cpp.

	* src/RacerQuery.cpp (Query::createBody, Query::createHead)
	(Query::createPremise): Construct lists of the corresponding query
	expressions.
	* include/RacerQuery.h: Likewise.

	* src/RacerBuilder.cpp (RacerStateBuilder::buildCommand): Use
	Query::createPremise() for building the state command.
	* include/RacerBuilder.h: Likewise.

	* src/RacerNRQL.cpp: Add documentation.
	Refine class hierarchy.
	* include/RacerNRQL.h: Likewise.
	
	* include/RacerQueryExpr.h: Add documentation.
	Refine class hierarchy.
	Add support for namespace identifier and different types of variables.

