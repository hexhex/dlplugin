-*- outline -*-

* Dependencies
dlvhex-racerplugin depends on following libraries and programs:

** dlvhex
http://www.kr.tuwien.ac.at/staff/roman/dlvhex/

** RACER
http://www.racer-systems.com/

** ACE
http://www.cs.wustl.edu/~schmidt/ACE.html

** libraptor
http://librdf.org/raptor/

** cppunit (optional)
http://cppunit.sourceforge.net/


* Building and installing dlvhex-racerplugin

** Prerequisites

*** dlvhex
See dlvhex installation instructions.


*** Racer
Download the Racer/RacerPro binary and install it in your favourite
location. dlvhex-racerplugin has been tested with RacerPro 1.8 and
1.9.


*** ACE
Download the ACE library and proceed according to the ACE-INSTALL file
found in the distribution tarball. To shortcut the configuration task
for linux systems, apply following patch to a fresh unpacked
ACE_wrappers directory:


diff -Naur ACE_wrappers.orig/ace/config.h ACE_wrappers/ace/config.h
--- ACE_wrappers.orig/ace/config.h      1970-01-01 01:00:00.000000000 +0100
+++ ACE_wrappers/ace/config.h   2005-08-15 18:07:31.000000000 +0200
@@ -0,0 +1 @@
+#include "ace/config-linux.h"
diff -Naur ACE_wrappers.orig/include/makeinclude/platform_macros.GNU ACE_wrappers/include/makeinclude/platform_macros.GNU
--- ACE_wrappers.orig/include/makeinclude/platform_macros.GNU   1970-01-01 01:00:00.000000000 +0100
+++ ACE_wrappers/include/makeinclude/platform_macros.GNU        2005-08-15 18:07:54.000000000 +0200
@@ -0,0 +1,2 @@
+static_libs=1
+include $(ACE_ROOT)/include/makeinclude/platform_linux.GNU


This is known to work for all ACE versions and g++ releases except the
4.x series.  For unknown reasons the ACE configuration needs some
massage in order to work with g++ 4.x releases. Thus ACE 5.4.7 needs
following patch:


diff -Naur ACE_wrappers.orig/ace/config.h ACE_wrappers/ace/config.h
--- ACE_wrappers.orig/ace/config.h	1970-01-01 01:00:00.000000000 +0100
+++ ACE_wrappers/ace/config.h	2005-11-17 10:01:34.000000000 +0100
@@ -0,0 +1 @@
+#include "ace/config-linux.h"
diff -Naur ACE_wrappers.orig/include/makeinclude/platform_g++_common.GNU ACE_wrappers/include/makeinclude/platform_g++_common.GNU
--- ACE_wrappers.orig/include/makeinclude/platform_g++_common.GNU	2005-11-17 10:00:26.000000000 +0100
+++ ACE_wrappers/include/makeinclude/platform_g++_common.GNU	2005-11-17 10:01:42.000000000 +0100
@@ -128,8 +128,8 @@
 
     # Take advantage of G++ (>= 4.x) visibility attributes to generate
     # improved shared library binaries.
-    ifeq ($(GXX_4_OR_BETTER), 1)
-      CCFLAGS += -fvisibility=hidden -fvisibility-inlines-hidden
-    endif # GXX_4_OR_BETTER == 1
+    #ifeq ($(GXX_4_OR_BETTER), 1)
+    #  CCFLAGS += -fvisibility=hidden -fvisibility-inlines-hidden
+    #endif # GXX_4_OR_BETTER == 1
   endif # static_libs_only
 endif # shared_libs
diff -Naur ACE_wrappers.orig/include/makeinclude/platform_macros.GNU ACE_wrappers/include/makeinclude/platform_macros.GNU
--- ACE_wrappers.orig/include/makeinclude/platform_macros.GNU	1970-01-01 01:00:00.000000000 +0100
+++ ACE_wrappers/include/makeinclude/platform_macros.GNU	2005-11-17 10:01:34.000000000 +0100
@@ -0,0 +1,2 @@
+static_libs=1
+include $(ACE_ROOT)/include/makeinclude/platform_linux.GNU


This flaw is known in ACE 5.4.8 and one needs following patch in order
to build this particular ACE release with g++ 4.x:


diff -Naur ACE_wrappers-5.4.8/ace/config.h ACE_wrappers/ace/config.h
--- ACE_wrappers-5.4.8/ace/config.h     1970-01-01 01:00:00.000000000 +0100
+++ ACE_wrappers/ace/config.h   2005-12-26 18:06:08.000000000 +0100
@@ -0,0 +1 @@
+#include "ace/config-linux.h"
diff -Naur ACE_wrappers-5.4.8/include/makeinclude/platform_macros.GNU ACE_wrappers/include/makeinclude/platform_macros.GNU
--- ACE_wrappers-5.4.8/include/makeinclude/platform_macros.GNU  1970-01-01 01:00:00.000000000 +0100
+++ ACE_wrappers/include/makeinclude/platform_macros.GNU        2005-12-26 18:06:30.000000000 +0100
@@ -0,0 +1,3 @@
+static_libs=1
+no_hidden_visibility=1
+include $(ACE_ROOT)/include/makeinclude/platform_linux.GNU



Installing ACE is not needed. Just point ACE_ROOT and LD_LIBRARY_PATH
to the ACE_wrappers resp. ACE_wrappers/ace
directories. dlvhex-racerplugin has been tested with ACE 5.4.0 up to
5.4.8.



*** libraptor
Follow the instructions of the INSTALL file found in the distributions
tarball. dlvhex-racerplugin needs at least libraptor 1.4.8 due to XML
namespace parsing support.


*** cppunit
Follow the instructions of the INSTALL file found in the distributions
tarball. dlvhex-racerplugin has been tested with cppunit 1.10.2.



** Configuration

*** bootstrap.sh
Generates Makefile.in's and the configure script with help of the
autotools.

*** PKG_CONFIG_PATH
Set this environment variable to the absolute path of dlvhex pkgconfig
directory.

*** RACERPATH
Set this environment variable to the absolute path of the Racer
binary. Defaults to "RacerPro".

*** ACE_ROOT
Absolute path to the ACE_wrappers directory.

*** LD_LIBRARY_PATH
Environment variable used to tell the dynamic linker the location to
the ACE library.


** Testing
Run "make check" to build and execute the cppunit-based regression
testsuite.


** Installation
Run "make install" to install dlvhex-racerplugin into a system-wide
plugin directory provided by dlvhex.
